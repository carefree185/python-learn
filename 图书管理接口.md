# 一、创建项目及配置项目

## 1.1 创建项目
```python
django-admin startproject drf  # 创建drf项目

cd drf

python manage.py satrtapp api  # 接口功能
```

## 1.2 配置项目

在`settings.py`文件的`INSTALLED_APPS`末尾添加如下内容。
```python
INSTALLED_APPS = [
    ...
    'rest_framework',  # drf框架
    'api.apps.ApiConfig',  # api应用
    'django_filters',  # 条件过滤组件
]
```

# 二、创建表模型

## 2.1 创建书籍表模型
```python
class Book(models.Model):

    id = models.AutoField(primary_key=True)  # 一个表不可以有多个自增字段
    name = models.CharField(max_length=32, verbose_name='书名')
    price = models.DecimalField(max_digits=5, decimal_places=2, verbose_name='书价格')

    is_delete = models.BooleanField(default=False, verbose_name='删除')  # 布尔类型字段，存放的是整型数据。
    create_time = models.DateTimeField(auto_now_add=True)  # auto_now_add=True 在第一次创建插入当前时间
    # create_time = models.DateTimeField(default=datetime.now)  # 在第一次创建插入当前时间
    last_update_time = models.DateTimeField(auto_now=True)  # auto_now=True 数据更新时插入当前时间

```

当要创建出版社表时，发现**is_delete、create_time、last_update_time**这三个字段在其他表中也会用到，可以使用面向对象继承方式来减少代码重复率。新建表**BaseModel**
```python
class BaseModel(models.Model):

    is_delete = models.BooleanField(default=False, verbose_name='删除')  # 布尔类型字段，存放的是整型数据。
    create_time = models.DateTimeField(auto_now_add=True)  # auto_now_add=True 在第一次创建插入当前时间
    # create_time = models.DateTimeField(default=datetime.now)  # 在第一次创建插入当前时间
    last_update_time = models.DateTimeField(auto_now=True)  # auto_now=True 数据更新时插入当前时间
```

如果直接这样写，在数据库迁移时会生成这张表，需要在**BaseModel**中添加一个**Meta**类来指定类的属性
```python
class Meta:
    # 单个字段有索引，有唯一
    # 多个字段可以有联合索引，联合唯一
    # unique_together = [字段...] 联合唯一
    # index_together = [字段...] 联合索引
    abstract = True  # 指定为抽象表，不在数据库中建表
```

**完全修改后的表模型如下** 
```python

class BaseModel(models.Model):

    is_delete = models.BooleanField(default=False, verbose_name='删除')  # 布尔类型字段，存放的是整型数据。
    create_time = models.DateTimeField(auto_now_add=True)  # auto_now_add=True 在第一次创建插入当前时间
    # create_time = models.DateTimeField(default=datetime.now)  # 在第一次创建插入当前时间
    last_update_time = models.DateTimeField(auto_now=True)  # auto_now=True 数据更新时插入当前时间

    class Meta:
        # 单个字段有索引，有唯一
        # 多个字段可以有联合索引，联合唯一
        # unique_together = [字段...] 联合唯一
        # index_together = [字段...] 联合索引
        abstract = True  # 指定为抽象表，不在数据库中建表


class Book(BaseModel):

    id = models.AutoField(primary_key=True)  # 一个表不可以有多个自增字段
    name = models.CharField(max_length=32, verbose_name='书名')
    price = models.DecimalField(max_digits=5, decimal_places=2, verbose_name='书价格')
```


