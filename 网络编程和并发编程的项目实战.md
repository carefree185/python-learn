# 阶段项目实战(计算机病毒)

# 一、软件架构
![](https://images.gitee.com/uploads/images/2020/1117/094826_6470339d_7841459.png "屏幕截图.png")

# 二、病毒程序原理之`dll`注入
了解什么是`DLL`; `DLL`全称为`Dynamic Link Library`(动态连接库)，Windows系统上实现动态共享函数的一种方式。

了解`DLL`的作用; 当多个进程使用到相同的函数时，如果每个进程都将其加载到内存中无疑是对内存资源的一种极大浪费。使用`DLL`当进程第一使用这个`dll`就将其加载搭到共享内存中，如果再有进程使用这个`dll`库则将在内存中读取。
> 优点: 节省内存资源
> 缺点: 增加程序使用的难度

了解`DLL`注入: `DLL`注入就是让进程A强行加载进程B给的`DLL`文件，并且执行进程B提供的`DLL`中的代码，达到控制进程的作用
> 进程B给定的`DLL`原先是不会被进程A主动加载的
> 1. 为目标进程添加新功能
> 2. 需要调试被注入DLL的程序
> 3. 为目标进程安装钩子程序

`DLL`注入方法:
> 1. 修改注册表
> 2. 使用`CreateRemoteThread`函数对运行中的进程注入
> 3. 使用`SetWindowsHookEx`函数对应用程序挂钩(HOOK)迫使程序加载`DLL`
> 4. 替换应用程序
> 5. 把dll作为调试器注入
> 6. 用`CreateProcess`对子进程注入`DLL`
> 7. 修改被注入进程的可执行程序的导入地址表

**`ctypes`是Python的外部函数库，从`python2.5`引入，兼容C语言的数据类型** 

# 三、相关代码实现
* 病毒程序
> 1. 完成偷拍照片
> 2. 监听键盘输入，锁定键盘
> 3. `tcp`客户端完成数据上传
```python

```
* 服务端
> 1. 接收上传过来的文件
> 2. 相应客户端的下载数据的请求
```python

```

* 客户端
> 1. 向服务端发送下载数据请求
> 2. 保存服务端传过来的数据
```python

```





